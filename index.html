<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Má»¥c TiÃªu Há»c Táº­p</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-image: url('mid.png');
      background-size: cover;
      background-position: center;
      color: #fff;
      text-align: center;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 40px 15px;
    }
    .container {
      background: rgba(0, 0, 0, 0.75);
      padding: 30px 30px 40px;
      max-width: 960px;
      width: 100%;
      border-radius: 20px;
      box-shadow: 0 0 30px rgba(0,0,0,0.9);
    }
    h1 {
      font-weight: 700;
      font-size: 2.4rem;
      margin-bottom: 15px;
      text-shadow: 1px 1px 6px #4caf50cc;
    }
    img {
      width: 100%;
      max-width: 400px;
      border-radius: 15px;
      margin: 10px auto 30px;
      display: block;
      box-shadow: 0 0 20px #4caf5077;
    }
    #progress {
      font-size: 1.4rem;
      margin-bottom: 20px;
      font-weight: 600;
      color: #a5d6a7;
      text-shadow: 0 0 5px #388e3c;
    }
    #bonusScoreBox {
      font-size: 1.1rem;
      margin-bottom: 25px;
      font-weight: 500;
      color: #ffd54f;
      text-shadow: 0 0 3px #fbc02d;
    }
    button {
      margin: 5px 7px 10px 7px;
      padding: 10px 22px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      background-color: #4caf50;
      color: white;
      transition: background-color 0.3s ease;
      box-shadow: 0 4px 8px #388e3caa;
    }
    button:hover:not(:disabled) {
      background-color: #388e3c;
    }
    button:disabled {
      background-color: #666;
      cursor: not-allowed;
      box-shadow: none;
    }
    #countdownTimer {
      margin-top: 10px;
      font-size: 1.3rem;
      color: #ffd54f;
      font-weight: 700;
      text-shadow: 0 0 6px #fbc02d;
      min-height: 30px;
    }
    h3 {
      margin-top: 30px;
      margin-bottom: 12px;
      font-weight: 700;
      color: #81c784;
      text-shadow: 0 0 3px #4caf50cc;
    }
    input[type="number"], input[type="time"], textarea {
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
      outline: none;
      margin-right: 10px;
      box-shadow: 0 0 5px #4caf5077;
      width: 130px;
      max-width: 90%;
      background: #2e7d32cc;
      color: #e8f5e9;
      transition: background-color 0.3s ease;
    }
    input[type="number"]:focus, input[type="time"]:focus, textarea:focus {
      background: #4caf5088;
      color: #fff;
    }
    #daily-buttons {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px 20px;
    }
    #daily-buttons > h3 {
      flex-basis: 100%;
      margin-bottom: 8px;
      margin-top: 24px;
      text-align: left;
    }
    #daily-buttons > button {
      flex: 1 1 140px;
      max-width: 160px;
    }
    #hocThemStats, #missedTasksList {
      background: #ffffff20;
      padding: 15px;
      border-radius: 15px;
      color: #dcedc8;
      font-size: 1.1rem;
      max-width: 900px;
      margin: 25px auto 0;
      text-align: left;
      box-shadow: 0 0 12px #aed581bb;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
      background: #ffffff10;
      border-radius: 10px;
      overflow-x: auto;
      color: #dcedc8;
      box-shadow: 0 0 20px #81c78466;
    }
    th, td {
      border: 1px solid #ffffff30;
      padding: 10px;
      vertical-align: top;
    }
    th {
      background: #4caf5088;
      font-weight: 700;
      font-size: 1rem;
    }
    textarea {
      background: #2e7d32cc;
      color: #e8f5e9;
      border-radius: 8px;
      resize: vertical;
      min-height: 50px;
      width: 100%;
      font-size: 15px;
      padding: 6px 10px;
      border: none;
      outline: none;
      box-shadow: inset 0 0 6px #4caf50aa;
    }
    label {
      font-size: 1.1rem;
      font-weight: 600;
      color: #a5d6a7;
      user-select: none;
    }
    .danger-btn {
      background-color: #f44336;
      box-shadow: 0 4px 8px #d32f2faa;
    }
    .danger-btn:hover {
      background-color: #d32f2f;
    }
    .secondary-btn {
      background-color: #e91e63;
      box-shadow: 0 4px 8px #c2185baa;
    }
    .secondary-btn:hover {
      background-color: #c2185b;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¯ Má»¥c tiÃªu há»c táº­p Ä‘áº¿n ngÃ y thi 15/06/2026</h1>
    <img src="Xiaomi-Mi-11-Ultra.jpg" alt="Pháº§n thÆ°á»Ÿng" />

    <p id="progress">Äiá»ƒm hiá»‡n táº¡i: 0 / 1000</p>
    <div id="bonusScoreBox"></div>

    <div id="dailyQuote" style="font-style: italic; font-size:1.3rem; margin-bottom: 15px;"></div>

    <div id="daily-buttons">
      <h3>ğŸ“… Äiá»ƒm danh & Há»c táº­p</h3>
      <button onclick="startCheckinTimer()" id="diemDanhBtn">Äiá»ƒm danh hÃ´m nay (+5)</button>
      <div id="countdownTimer"></div>

      <h3>ğŸ§® ToÃ¡n</h3>
      <button onclick="congDiem('toan_hoc', 5)">Há»c ToÃ¡n (+5)</button>
      <button onclick="congDiem('toan_cauhoi', 5)">LÃ m 50 cÃ¢u há»i ToÃ¡n (+5)</button>

      <h3>ğŸ”­ LÃ½</h3>
      <button onclick="congDiem('ly_hoc', 5)">Há»c LÃ½ (+5)</button>
      <button onclick="congDiem('ly_cauhoi', 5)">LÃ m 50 cÃ¢u há»i LÃ½ (+5)</button>

      <h3>âš—ï¸ HÃ³a</h3>
      <button onclick="congDiem('hoa_hoc', 5)">Há»c HÃ³a (+5)</button>
      <button onclick="congDiem('hoa_cauhoi', 5)">LÃ m 50 cÃ¢u há»i HÃ³a (+5)</button>

      <h3>ğŸ‡¬ğŸ‡§ Tiáº¿ng Anh</h3>
      <button onclick="congDiem('anh_nguPhap', 5)">Há»c ngá»¯ phÃ¡p (+5)</button>
      <button onclick="congDiem('anh_tuVung', 5)">Há»c 5 tá»« vá»±ng má»›i (+5)</button>
 

      <h3>ğŸ“š Ã”n táº­p</h3>
      <button onclick="congDiem('on', 20)">Ã”n táº­p kiáº¿n thá»©c (+20)</button>

      <h3>ğŸš€ Há»c thÃªm</h3>
      <input type="number" id="hocThemPhut" placeholder="PhÃºt há»c thÃªm" min="1" />
      <button onclick="hocThem()">Cá»™ng Ä‘iá»ƒm há»c thÃªm</button>
    </div>

    <div id="hocThemStats"></div>

    <div style="margin-top:30px;">
      <h3>ğŸ† ThÃªm Ä‘iá»ƒm khi Ä‘áº¡t Ä‘iá»ƒm tá»‘t</h3>
      <input type="number" id="diemSo" min="7" max="10" placeholder="Nháº­p Ä‘iá»ƒm 7-10" />
      <button onclick="themDiemSo()">+ Äiá»ƒm thÆ°á»Ÿng</button>
    </div>

    <div style="margin-top: 20px;">
      <label>
        â° Nháº¯c giá» há»c:
        <input type="time" id="reminderTime" />
        <button onclick="setReminder()">LÆ°u</button>
      </label>
    </div>

    <div style="margin-top: 15px;">
      <button class="danger-btn" onclick="xoaLichHomNay()">ğŸ—‘ï¸ XÃ³a dá»¯ liá»‡u hÃ´m nay</button>
      <button class="secondary-btn" onclick="xoaGhiChuHomNay()">ğŸ“œ XÃ³a ghi chÃº hÃ´m nay</button>
    </div>

    <div id="missedTasksList"></div>

    <div style="margin-top: 40px;">
      <h2>ğŸ—“ï¸ Lá»‹ch há»c & Ghi chÃº</h2>
      <table>
        <thead>
          <tr>
            <th>NgÃ y</th>
            <th>Nhiá»‡m vá»¥</th>
            <th>Ghi chÃº</th>
          </tr>
        </thead>
        <tbody id="calendarBody"></tbody>
      </table>
    </div>
  </div>

  <script>
    const TOTAL_SCORE = 18000;
    const milestones = [
      { score: 1000, label: "Mua Ä‘á»“ Äƒn yÃªu thÃ­ch ğŸœ" },
      { score: 3000, label: "Mua mÃ³n Ä‘á»“ báº¡n yÃªu thÃ­ch ğŸ§¸" },
      { score: 6000, label: "Xiaomi Mi 11 Ultra ğŸ“±" },
      { score: 10000, label: "Xiaomi Mi 13 Pro ğŸš€" },
      { score: 18000, label: "ğŸ”¥ Xiaomi 16 Pro Max (siÃªu quÃ ) ğŸ”¥" },
    ];

    let diem = parseInt(localStorage.getItem("diem")) || 0;
    let diemThuong = parseInt(localStorage.getItem("diemThuong")) || 0;
    let bonusStats = JSON.parse(localStorage.getItem("bonusStats")) || {};
    let today = new Date().toISOString().split("T")[0];
    let done = JSON.parse(localStorage.getItem("done")) || {};
    let notes = JSON.parse(localStorage.getItem("notes")) || {};
    let lastCheck = localStorage.getItem("lastCheck") || "";
    const tasks = [
      "on",
      "toan_hoc",
      "toan_cauhoi",
      "ly_hoc",
      "ly_cauhoi",
      "hoa_hoc",
      "hoa_cauhoi",
      "anh_nguPhap",
      "anh_tuVung",
      "anh_nghe",
      "diemdanh",
    ];
    const quotes = [
      "ğŸ“š HÃ´m nay báº¡n há»c gÃ¬ rá»“i? Cá»‘ gáº¯ng lÃªn nhÃ©!",
      "ğŸš€ Má»—i ngÃ y má»™t bÆ°á»›c, báº¡n sáº½ tiáº¿n xa!",
      "ğŸ’¡ Há»c hÃ´m nay - ThÃ nh cÃ´ng ngÃ y mai!",
      "ğŸ”¥ Äá»«ng Ä‘á»ƒ ngÃ y hÃ´m nay trÃ´i qua vÃ´ Ã­ch!",
      "ğŸŒ± Tri thá»©c lÃ  sá»©c máº¡nh, cá»‘ lÃªn báº¡n nhÃ©!",
    ];

    // Kiá»ƒm tra Ä‘iá»ƒm danh ngÃ y trÆ°á»›c, trá»« Ä‘iá»ƒm náº¿u nhiá»‡m vá»¥ chÆ°a lÃ m
    if (lastCheck && lastCheck !== today) {
      const missed = done[lastCheck] || {};
      tasks.forEach((task) => {
        if (!missed[task]) diem -= task === "on" ? 20 : 5;
      });
      diem = Math.max(0, diem);
      localStorage.setItem("diem", diem);
      localStorage.setItem(
        "missedTasks_" + lastCheck,
        JSON.stringify(tasks.filter((task) => !missed[task]))
      );
    }
    localStorage.setItem("lastCheck", today);

    // 15 phÃºt Ä‘áº¿m ngÆ°á»£c Ä‘iá»ƒm danh
    const CHECKIN_TIME = 15 * 60; // 15 phÃºt (giÃ¢y)
    let checkinStart = parseInt(localStorage.getItem("checkinStart")) || 0;
    let checkinTimerId = null;

    function updateProgress() {
      const milestone = getCurrentMilestone();
      const nextMilestone = getNextMilestone();

      if (!nextMilestone) {
        // ÄÃ£ vÆ°á»£t má»‘c cao nháº¥t
        document.getElementById(
          "progress"
        ).innerText = `Äiá»ƒm hiá»‡n táº¡i: ${diem} / ${TOTAL_SCORE} (Äáº¡t má»‘c cao nháº¥t!) ğŸ‰`;
      } else {
        const currentBase = milestone ? milestone.score : 0;
        const currentProgress = diem - currentBase;
        const needed = nextMilestone.score - currentBase;
        document.getElementById(
          "progress"
        ).innerText = `Äiá»ƒm hiá»‡n táº¡i: ${currentProgress} / ${needed} (Tiáº¿n Ä‘áº¿n: ${nextMilestone.label})`;
      }

      document.getElementById(
        "bonusScoreBox"
      ).innerText = `Tá»•ng Ä‘iá»ƒm tá»« Ä‘iá»ƒm tá»‘t: ${diemThuong}`;

      // Hiá»‡n pháº§n thÆ°á»Ÿng Ä‘áº¡t Ä‘Æ°á»£c
      let rewardsText = "ğŸ Pháº§n thÆ°á»Ÿng Ä‘Ã£ nháº­n:\n";
      milestones.forEach(({ score, label }) => {
        if (diem >= score) {
          rewardsText += `âœ”ï¸ ${label}\n`;
        }
      });

      // CÃ³ thá»ƒ thÃªm pháº§n thÆ°á»Ÿng lÃªn UI náº¿u muá»‘n
      // alert náº¿u Ä‘áº¡t má»‘c má»›i? (CÃ³ thá»ƒ thÃªm tÃ­nh nÄƒng nÃ y)

      updateBonusStats();
      renderMissedTasks();

      if (diem >= TOTAL_SCORE) {
        alert("ğŸ‰ ChÃºc má»«ng báº¡n Ä‘Ã£ Ä‘áº¡t Ä‘Æ°á»£c pháº§n thÆ°á»Ÿng cao nháº¥t: Xiaomi 16 Pro Max!");
      }
    }

    // TÃ¬m má»‘c pháº§n thÆ°á»Ÿng hiá»‡n táº¡i dá»±a trÃªn Ä‘iá»ƒm
    function getCurrentMilestone() {
      let current = null;
      for (let i = milestones.length - 1; i >= 0; i--) {
        if (diem >= milestones[i].score) {
          current = milestones[i];
          break;
        }
      }
      return current;
    }

    // TÃ¬m má»‘c tiáº¿p theo
    function getNextMilestone() {
      for (let i = 0; i < milestones.length; i++) {
        if (diem < milestones[i].score) return milestones[i];
      }
      return null;
    }

    function congDiem(task, amount) {
      let doneToday = done[today] || {};
      if (doneToday[task]) return alert("Báº¡n Ä‘Ã£ lÃ m nhiá»‡m vá»¥ nÃ y hÃ´m nay rá»“i!");
      diem += amount;
      doneToday[task] = true;
      done[today] = doneToday;
      localStorage.setItem("diem", diem);
      localStorage.setItem("done", JSON.stringify(done));
      updateProgress();
      renderCalendar();
    }

    // HÃ m Ä‘iá»ƒm danh cÃ³ 15 phÃºt Ä‘áº¿m ngÆ°á»£c
    function startCheckinTimer() {
      if (done[today] && done[today]["diemdanh"]) {
        alert("Báº¡n Ä‘Ã£ Ä‘iá»ƒm danh hÃ´m nay rá»“i!");
        return;
      }
      if (checkinStart === 0) {
        checkinStart = Date.now();
        localStorage.setItem("checkinStart", checkinStart);
        startCountdown();
      } else {
        alert("Báº¡n Ä‘ang trong thá»i gian há»c 15 phÃºt, vui lÃ²ng hoÃ n thÃ nh Ä‘á»ƒ Ä‘Æ°á»£c Ä‘iá»ƒm danh.");
      }
    }

    function startCountdown() {
      const countdownElem = document.getElementById("countdownTimer");
      if (checkinTimerId) clearInterval(checkinTimerId);

      function update() {
        let now = Date.now();
        let elapsed = Math.floor((now - checkinStart) / 1000);
        let remain = CHECKIN_TIME - elapsed;

        if (remain <= 0) {
          congDiem("diemdanh", 5);
          countdownElem.innerText = "ğŸ‰ ÄÃ£ hoÃ n thÃ nh 15 phÃºt há»c, Ä‘iá»ƒm danh +5 Ä‘iá»ƒm!";
          localStorage.removeItem("checkinStart");
          checkinStart = 0;
          clearInterval(checkinTimerId);
          document.getElementById("diemDanhBtn").disabled = false;
        } else {
          let min = Math.floor(remain / 60)
            .toString()
            .padStart(2, "0");
          let sec = (remain % 60).toString().padStart(2, "0");
          countdownElem.innerText = `â³ Thá»i gian há»c: ${min}:${sec}`;
          document.getElementById("diemDanhBtn").disabled = true;
        }
      }
      update();
      checkinTimerId = setInterval(update, 1000);
    }

    function hocThem() {
      let minutes = parseInt(document.getElementById("hocThemPhut").value);
      if (isNaN(minutes) || minutes <= 0)
        return alert("Nháº­p sá»‘ phÃºt há»£p lá»‡!");
      let diemCong = Math.min(30, Math.floor(minutes / 2));
      diem += diemCong;
      let date = new Date();
      let keyWeek = getWeekNumber(date);
      let keyMonth = date.getMonth();
      bonusStats[keyWeek] = (bonusStats[keyWeek] || 0) + diemCong;
      bonusStats["m" + keyMonth] = (bonusStats["m" + keyMonth] || 0) + diemCong;
      localStorage.setItem("bonusStats", JSON.stringify(bonusStats));
      localStorage.setItem("diem", diem);
      alert(`+${diemCong} Ä‘iá»ƒm tá»« há»c thÃªm!`);
      updateProgress();
      document.getElementById("hocThemPhut").value = "";
    }

    function themDiemSo() {
      let val = parseInt(document.getElementById("diemSo").value);
      let cong = 0;
      if (val === 7) cong = 5;
      else if (val === 8) cong = 10;
      else if (val === 9) cong = 15;
      else if (val === 10) cong = 20;
      else return alert("Chá»‰ nháº­n Ä‘iá»ƒm tá»« 7 Ä‘áº¿n 10");
      diem += cong;
      diemThuong += cong;
      localStorage.setItem("diem", diem);
      localStorage.setItem("diemThuong", diemThuong);
      updateProgress();
      alert(`+${cong} Ä‘iá»ƒm thÆ°á»Ÿng tá»« Ä‘iá»ƒm ${val}`);
      document.getElementById("diemSo").value = "";
    }

    function updateBonusStats() {
      let now = new Date();
      let w = getWeekNumber(now);
      let m = "m" + now.getMonth();
      let week = bonusStats[w] || 0;
      let month = bonusStats[m] || 0;
      document.getElementById(
        "hocThemStats"
      ).innerHTML = `ğŸ“Š Äiá»ƒm há»c thÃªm tuáº§n nÃ y: ${week} | thÃ¡ng nÃ y: ${month}`;
    }

    function getWeekNumber(d) {
      d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
      d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
      let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
      return Math.ceil((((d - yearStart) / 86400000 + 1) / 7));
    }

    function renderCalendar() {
      const tbody = document.getElementById("calendarBody");
      tbody.innerHTML = "";
      const days = Object.keys(done).sort().reverse();
      days.forEach((day) => {
        const row = document.createElement("tr");
        const noteVal = notes[day] || "";
        row.innerHTML = `<td>${day}</td><td>${Object.keys(
          done[day]
        ).join(", ")}</td><td><textarea onchange="saveNote('${day}', this.value)">${noteVal}</textarea></td>`;
        tbody.appendChild(row);
      });
    }

    function renderMissedTasks() {
      const container = document.getElementById("missedTasksList");
      container.innerHTML = "<h3>ğŸ”„ Nhiá»‡m vá»¥ chÆ°a lÃ m (cÃ³ thá»ƒ lÃ m bÃ¹)</h3>";
      let html = "";
      for (let i in localStorage) {
        if (i.startsWith("missedTasks_")) {
          const day = i.replace("missedTasks_", "");
          const tasks = JSON.parse(localStorage.getItem(i));
          html += `<div><b>${day}</b>: ${tasks.join(
            ", "
          )} <button onclick="lamBu('${day}')">LÃ m bÃ¹</button></div>`;
        }
      }
      container.innerHTML += html;
    }

    function lamBu(day) {
      const key = "missedTasks_" + day;
      const missedTasks = JSON.parse(localStorage.getItem(key));
      if (!missedTasks) return;
      let added = 0;
      missedTasks.forEach((task) => {
        added += task === "on" ? 20 : 5;
        done[day] = done[day] || {};
        done[day][task] = true;
      });
      diem += added;
      localStorage.removeItem(key);
      localStorage.setItem("diem", diem);
      localStorage.setItem("done", JSON.stringify(done));
      alert(`ÄÃ£ lÃ m bÃ¹ ${missedTasks.length} nhiá»‡m vá»¥ ngÃ y ${day} (+${added} Ä‘iá»ƒm)`);
      updateProgress();
      renderCalendar();
    }

    function saveNote(day, value) {
      notes[day] = value;
      localStorage.setItem("notes", JSON.stringify(notes));
    }

    function xoaLichHomNay() {
      if (confirm("XÃ³a táº¥t cáº£ nhiá»‡m vá»¥ hÃ´m nay?")) {
        if (done[today]) {
          let lost = 0;
          Object.keys(done[today]).forEach((task) => {
            lost += task === "on" ? 20 : 5;
          });
          diem = Math.max(0, diem - lost);
          delete done[today];
          localStorage.setItem("diem", diem);
          localStorage.setItem("done", JSON.stringify(done));
          alert("ÄÃ£ xÃ³a nhiá»‡m vá»¥ hÃ´m nay vÃ  trá»« Ä‘iá»ƒm tÆ°Æ¡ng á»©ng.");
          updateProgress();
          renderCalendar();
        }
      }
    }

    function xoaGhiChuHomNay() {
      if (confirm("XÃ³a ghi chÃº hÃ´m nay?")) {
        if (notes[today]) {
          delete notes[today];
          localStorage.setItem("notes", JSON.stringify(notes));
          alert("ÄÃ£ xÃ³a ghi chÃº hÃ´m nay.");
          renderCalendar();
        }
      }
    }

    function setReminder() {
      const time = document.getElementById("reminderTime").value;
      if (!time) return alert("HÃ£y chá»n giá»!");
      localStorage.setItem("reminderTime", time);
      alert("ÄÃ£ lÆ°u giá» nháº¯c há»c: " + time);
    }

    function startReminderCheck() {
      if (!("Notification" in window)) return;
      Notification.requestPermission();
      setInterval(() => {
        const t = localStorage.getItem("reminderTime");
        if (!t) return;
        const now = new Date();
        const nowStr =
          now.getHours().toString().padStart(2, "0") +
          ":" +
          now.getMinutes().toString().padStart(2, "0");
        if (nowStr === t) {
          new Notification("â° Äáº¿n giá» há»c rá»“i! HÃ£y hoÃ n thÃ nh má»¥c tiÃªu hÃ´m nay nhÃ©.");
        }
      }, 60000);
    }

    document.addEventListener("DOMContentLoaded", () => {
      updateProgress();
      renderCalendar();
      startReminderCheck();
      document.getElementById("dailyQuote").innerText = quotes[new Date().getDate() % quotes.length];

      if (checkinStart !== 0) {
        startCountdown();
      }
    });
  </script>
</body>
</html>



