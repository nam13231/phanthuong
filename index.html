<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<title>M·ª•c Ti√™u H·ªçc T·∫≠p</title>
<style>
  /* Reset & c∆° b·∫£n */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-image: url('mid.png');
    background-size: cover;
    background-position: center;
    color: #f0f0f0;
    text-align: center;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 30px 15px;
    background-attachment: fixed;
  }
  .container {
    background: rgba(20, 20, 20, 0.85);
    padding: 30px 30px 40px;
    max-width: 900px;
    width: 100%;
    border-radius: 18px;
    box-shadow: 0 0 20px 4px rgba(255, 215, 0, 0.4);
  }
  h1 {
    font-weight: 700;
    font-size: 2.3rem;
    margin-bottom: 15px;
    text-shadow: 0 0 8px #ffd700aa;
  }
  img {
    width: 100%;
    max-height: 300px;
    object-fit: contain;
    border-radius: 15px;
    box-shadow: 0 0 20px #ffd700aa;
    margin-bottom: 25px;
  }
  #progress {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 10px;
    text-shadow: 0 0 6px #fff8;
  }
  #bonusScoreBox {
    margin-top: 10px;
    font-size: 1.15rem;
    font-weight: 500;
    color: #a0d8a0;
    text-shadow: 0 0 4px #5a8f5a;
  }
  #rewardBox {
    margin-top: 18px;
    font-size: 1.4rem;
    font-weight: 700;
    color: #ffd700;
    text-shadow: 0 0 10px #ffda44cc;
  }
  #dailyQuote {
    margin-bottom: 25px;
    font-size: 1.3rem;
    font-style: italic;
    color: #ffe082;
    text-shadow: 0 0 5px #b58900cc;
  }

  /* N√∫t b·∫•m */
  button {
    margin: 5px 8px 12px 8px;
    padding: 12px 28px;
    font-size: 1rem;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    background-color: #4caf50;
    color: white;
    font-weight: 600;
    transition: background-color 0.3s ease, transform 0.15s ease;
    box-shadow: 0 3px 6px #2c7a2caa;
  }
  button:hover {
    background-color: #67c767;
    transform: translateY(-2px);
    box-shadow: 0 6px 12px #4caf5077;
  }
  button:active {
    transform: translateY(0);
    box-shadow: 0 3px 6px #2c7a2caa;
  }
  button[style*="background-color:#f44336"] {
    background-color: #f44336;
    box-shadow: 0 3px 6px #a52828aa;
  }
  button[style*="background-color:#f44336"]:hover {
    background-color: #ff6659;
    box-shadow: 0 6px 12px #f4433677;
  }
  button[style*="background-color:#e91e63"] {
    background-color: #e91e63;
    box-shadow: 0 3px 6px #a0264d99;
  }
  button[style*="background-color:#e91e63"]:hover {
    background-color: #f0487d;
    box-shadow: 0 6px 12px #e91e6377;
  }

  /* Input */
  input[type="time"], input[type="number"] {
    padding: 8px 12px;
    border-radius: 10px;
    border: none;
    font-size: 1rem;
    width: 160px;
    box-shadow: inset 0 0 6px #0008;
    margin-right: 10px;
    transition: box-shadow 0.3s ease;
  }
  input[type="time"]:focus, input[type="number"]:focus {
    outline: none;
    box-shadow: inset 0 0 12px #4caf5088;
  }

  textarea {
    width: 100%;
    min-height: 60px;
    resize: vertical;
    border-radius: 10px;
    border: none;
    padding: 8px 10px;
    font-size: 1rem;
    font-family: inherit;
    box-shadow: inset 0 0 6px #000a;
    color: #fff;
    background-color: #222a;
    transition: box-shadow 0.3s ease;
  }
  textarea:focus {
    outline: none;
    box-shadow: inset 0 0 10px #4caf5088;
    background-color: #22331a;
  }

  /* C√°c m·ª•c nh·ªè */
  #daily-buttons h3 {
    margin-top: 30px;
    margin-bottom: 12px;
    font-size: 1.25rem;
    color: #ffd54f;
    text-shadow: 0 0 6px #b38600cc;
  }

  #hocThemStats {
    margin-top: 20px;
    font-size: 1.15rem;
    font-weight: 600;
    color: #9ae29a;
    text-shadow: 0 0 5px #3f763fbb;
  }

  #missedTasksList {
    margin-top: 25px;
    background: rgba(255 255 255 / 0.1);
    padding: 18px 22px;
    border-radius: 14px;
    font-size: 1.1rem;
    text-align: left;
    max-height: 150px;
    overflow-y: auto;
  }
  #missedTasksList h3 {
    color: #fff9a7;
    margin-bottom: 12px;
    text-shadow: 0 0 6px #b38600cc;
  }
  #missedTasksList div {
    margin-bottom: 10px;
  }
  #missedTasksList button {
    font-size: 0.85rem;
    padding: 6px 14px;
    background-color: #ffb74d;
    color: #4a2e00;
    font-weight: 700;
    box-shadow: none;
  }
  #missedTasksList button:hover {
    background-color: #ffcc60;
  }

  /* B·∫£ng l·ªãch */
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 30px;
    background: rgba(255 255 255 / 0.12);
    border-radius: 12px;
    overflow: hidden;
  }
  th, td {
    border: 1px solid rgba(255 255 255 / 0.3);
    padding: 10px 12px;
    color: #eee;
    vertical-align: top;
  }
  th {
    background: rgba(255 215 0 / 0.4);
    color: #222;
    font-weight: 700;
    text-shadow: none;
  }
  textarea {
    font-size: 1rem;
  }

</style>
</head>
<body>
  <div class="container">
    <h1>üéØ M·ª•c ti√™u h·ªçc t·∫≠p ƒë·∫øn ng√†y thi 15/06/2026</h1>
    <img src="Xiaomi-Mi-11-Ultra.jpg" alt="Ph·∫ßn th∆∞·ªüng" />
    <p id="progress">ƒêi·ªÉm hi·ªán t·∫°i: 0 / 6000</p>

    <div id="dailyQuote"></div>

    <div id="daily-buttons">
      <button onclick="diemDanh()">ƒêi·ªÉm danh h√¥m nay (+5)</button><br />

      <h3>üßÆ To√°n</h3>
      <button onclick="congDiem('toan_hoc', 5)">H·ªçc To√°n (+5)</button>
      <button onclick="congDiem('toan_cauhoi', 5)">L√†m 50 c√¢u h·ªèi To√°n (+5)</button>

      <h3>üî≠ L√Ω</h3>
      <button onclick="congDiem('ly_hoc', 5)">H·ªçc L√Ω (+5)</button>
      <button onclick="congDiem('ly_cauhoi', 5)">L√†m 50 c√¢u h·ªèi L√Ω (+5)</button>

      <h3>‚öóÔ∏è H√≥a</h3>
      <button onclick="congDiem('hoa_hoc', 5)">H·ªçc H√≥a (+5)</button>
      <button onclick="congDiem('hoa_cauhoi', 5)">L√†m 50 c√¢u h·ªèi H√≥a (+5)</button>

      <h3>üá¨üáß Ti·∫øng Anh</h3>
      <button onclick="congDiem('anh_nguPhap', 5)">H·ªçc ng·ªØ ph√°p (+5)</button>
      <button onclick="congDiem('anh_tuVung', 5)">H·ªçc 5 t·ª´ v·ª±ng m·ªõi (+5)</button>
      <button onclick="congDiem('anh_nghe', 5)">Luy·ªán nghe ti·∫øng Anh (+5)</button>

      <h3>üìö √în t·∫≠p</h3>
      <button onclick="congDiem('on', 20)">√în t·∫≠p ki·∫øn th·ª©c (+20)</button>

      <h3>üöÄ H·ªçc th√™m</h3>
      <input type="number" id="hocThemPhut" placeholder="Ph√∫t h·ªçc th√™m" />
      <button onclick="hocThem()">C·ªông ƒëi·ªÉm h·ªçc th√™m</button>
    </div>

    <div id="hocThemStats"></div>

    <div style="margin-top:20px">
      <h3>üèÜ Th√™m ƒëi·ªÉm khi ƒë·∫°t ƒëi·ªÉm t·ªët</h3>
      <input type="number" id="diemSo" min="7" max="10" placeholder="Nh·∫≠p ƒëi·ªÉm 7-10" />
      <button onclick="themDiemSo()">+ ƒêi·ªÉm th∆∞·ªüng</button>
    </div>

    <div id="bonusScoreBox"></div>

    <div style="margin-top: 20px;">
      <label
        >‚è∞ Nh·∫Øc gi·ªù h·ªçc:
        <input type="time" id="reminderTime" /> <button onclick="setReminder()">L∆∞u</button></label
      >
    </div>

    <div style="margin-top: 15px;">
      <button style="background-color:#f44336" onclick="xoaLichHomNay()">üóëÔ∏è X√≥a d·ªØ li·ªáu h√¥m nay</button>
      <button style="background-color:#e91e63" onclick="xoaGhiChuHomNay()">üìú X√≥a ghi ch√∫ h√¥m nay</button>
    </div>

    <div id="missedTasksList"></div>

    <div style="margin-top: 30px;">
      <h2>üóìÔ∏è L·ªãch h·ªçc & Ghi ch√∫</h2>
      <table>
        <thead>
          <tr>
            <th>Ng√†y</th>
            <th>Nhi·ªám v·ª•</th>
            <th>Ghi ch√∫</th>
          </tr>
        </thead>
        <tbody id="calendarBody"></tbody>
      </table>
    </div>

    <div id="rewardBox"></div>
  </div>

<script>
  const TOTAL_SCORE = 6000;
  let diem = parseInt(localStorage.getItem("diem")) || 0;
  let diemThuong = parseInt(localStorage.getItem("diemThuong")) || 0;
  let bonusStats = JSON.parse(localStorage.getItem("bonusStats")) || {};
  let today = new Date().toISOString().split("T")[0];
  let done = JSON.parse(localStorage.getItem("done")) || {};
  let notes = JSON.parse(localStorage.getItem("notes")) || {};
  let lastCheck = localStorage.getItem("lastCheck") || "";
  const tasks = [
    "on",
    "toan_hoc",
    "toan_cauhoi",
    "ly_hoc",
    "ly_cauhoi",
    "hoa_hoc",
    "hoa_cauhoi",
    "anh_nguPhap",
    "anh_tuVung",
    "anh_nghe",
    "diemdanh",
  ];
  const quotes = [
    "üìö H√¥m nay b·∫°n h·ªçc g√¨ r·ªìi? C·ªë g·∫Øng l√™n nh√©!",
    "üöÄ M·ªói ng√†y m·ªôt b∆∞·ªõc, b·∫°n s·∫Ω ti·∫øn xa!",
    "üí° H·ªçc h√¥m nay - Th√†nh c√¥ng ng√†y mai!",
    "üî• ƒê·ª´ng ƒë·ªÉ ng√†y h√¥m nay tr√¥i qua v√¥ √≠ch!",
    "üå± Tri th·ª©c l√† s·ª©c m·∫°nh, c·ªë l√™n b·∫°n nh√©!",
  ];

  if (lastCheck && lastCheck !== today) {
    const missed = done[lastCheck] || {};
    tasks.forEach((task) => {
      if (!missed[task]) diem -= task === "on" ? 20 : 5;
    });
    diem = Math.max(0, diem);
    localStorage.setItem("diem", diem);
    localStorage.setItem(
      "missedTasks_" + lastCheck,
      JSON.stringify(tasks.filter((task) => !missed[task]))
    );
  }
  localStorage.setItem("lastCheck", today);

  const rewards = [
    { score: 2000, reward: "Mua ƒë·ªì ƒÉn y√™u th√≠ch üçú" },
    { score: 4000, reward: "Mua m√≥n ƒë·ªì b·∫°n y√™u th√≠ch üß∏" },
    { score: 6000, reward: "Xiaomi Mi 11 Ultra üì±" },
    { score: 10000, reward: "Xiaomi Mi 13 Pro üöÄ" },
    { score: 20000, reward: "üî• Xiaomi 16 Pro Max (si√™u qu√†) üî•" },
  ];

  function getNextRewardScore(currentScore) {
    for (let i = 0; i < rewards.length; i++) {
      if (rewards[i].score > currentScore) {
        return rewards[i].score;
      }
    }
    return rewards[rewards.length - 1].score;
  }

  function updateProgress() {
    const nextScore = getNextRewardScore(diem);
    document.getElementById("progress").innerText = `ƒêi·ªÉm hi·ªán t·∫°i: ${diem} / ${nextScore}`;
    document.getElementById("bonusScoreBox").innerText = `T·ªïng ƒëi·ªÉm t·ª´ ƒëi·ªÉm t·ªët: ${diemThuong}`;
    if (diem >= TOTAL_SCORE) alert("üéâ Ch√∫c m·ª´ng b·∫°n ƒë√£ ƒë·∫°t ƒë∆∞·ª£c Xiaomi Mi 11 Ultra!");
    updateBonusStats();
    renderMissedTasks();
    updateRewards();
  }

  function updateRewards() {
    let rewardBox = document.getElementById("rewardBox");
    // T√¨m ph·∫ßn th∆∞·ªüng cao nh·∫•t ƒë·∫°t ƒë∆∞·ª£c
    let currentReward = null;
    for (let i = rewards.length - 1; i >= 0; i--) {
      if (diem >= rewards[i].score) {
        currentReward = rewards[i];
        break;
      }
    }
    if (currentReward) {
      rewardBox.innerText = `üèÖ Ph·∫ßn th∆∞·ªüng hi·ªán t·∫°i: ${currentReward.reward} (m·ªëc ${currentReward.score} ƒëi·ªÉm)`;
    } else {
      rewardBox.innerText = "üèÖ Ch∆∞a ƒë·∫°t m·ªëc ph·∫ßn th∆∞·ªüng n√†o, c·ªë g·∫Øng th√™m nh√©!";
    }
  }

  function congDiem(task, amount) {
    let doneToday = done[today] || {};
    if (doneToday[task]) return alert("B·∫°n ƒë√£ l√†m nhi·ªám v·ª• n√†y h√¥m nay r·ªìi!");
    diem += amount;
    doneToday[task] = true;
    done[today] = doneToday;
    localStorage.setItem("diem", diem);
    localStorage.setItem("done", JSON.stringify(done));
    updateProgress();
    renderCalendar();
  }

  function diemDanh() {
    congDiem("diemdanh", 5);
  }

  function hocThem() {
    let minutes = parseInt(document.getElementById("hocThemPhut").value);
    if (isNaN(minutes) || minutes <= 0) return alert("Nh·∫≠p s·ªë ph√∫t h·ª£p l·ªá!");
    let diemCong = Math.min(30, Math.floor(minutes / 2));
    diem += diemCong;
    let date = new Date();
    let keyWeek = getWeekNumber(date);
    let keyMonth = date.getMonth();
    bonusStats[keyWeek] = (bonusStats[keyWeek] || 0) + diemCong;
    bonusStats["m" + keyMonth] = (bonusStats["m" + keyMonth] || 0) + diemCong;
    localStorage.setItem("bonusStats", JSON.stringify(bonusStats));
    localStorage.setItem("diem", diem);
    alert(`+${diemCong} ƒëi·ªÉm t·ª´ h·ªçc th√™m!`);
    updateProgress();
    document.getElementById("hocThemPhut").value = "";
  }

  function themDiemSo() {
    let val = parseInt(document.getElementById("diemSo").value);
    let cong = 0;
    if (val === 7) cong = 5;
    else if (val === 8) cong = 10;
    else if (val === 9) cong = 15;
    else if (val === 10) cong = 20;
    else return alert("Ch·ªâ nh·∫≠n ƒëi·ªÉm t·ª´ 7 ƒë·∫øn 10");
    diem += cong;
    diemThuong += cong;
    localStorage.setItem("diem", diem);
    localStorage.setItem("diemThuong", diemThuong);
    updateProgress();
    alert(`+${cong} ƒëi·ªÉm th∆∞·ªüng t·ª´ ƒëi·ªÉm ${val}`);
    document.getElementById("diemSo").value = "";
  }

  function updateBonusStats() {
    let now = new Date();
    let w = getWeekNumber(now);
    let m = "m" + now.getMonth();
    let week = bonusStats[w] || 0;
    let month = bonusStats[m] || 0;
    document.getElementById("hocThemStats").innerHTML = `üìä ƒêi·ªÉm h·ªçc th√™m tu·∫ßn n√†y: ${week} | th√°ng n√†y: ${month}`;
  }

  function getWeekNumber(d) {
    d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
    d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay() || 7));
    let yearStart = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));
    return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);
  }

  function renderCalendar() {
    const tbody = document.getElementById("calendarBody");
    tbody.innerHTML = "";
    const days = Object.keys(done).sort().reverse();
    days.forEach((day) => {
      const row = document.createElement("tr");
      const noteVal = notes[day] || "";
      row.innerHTML = `<td>${day}</td><td>${Object.keys(done[day]).join(", ")}</td><td><textarea onchange="saveNote('${day}', this.value)">${noteVal}</textarea></td>`;
      tbody.appendChild(row);
    });
  }

  function renderMissedTasks() {
    const container = document.getElementById("missedTasksList");
    container.innerHTML = "<h3>üîÑ Nhi·ªám v·ª• ch∆∞a l√†m (c√≥ th·ªÉ l√†m b√π)</h3>";
    let html = "";
    for (let i in localStorage) {
      if (i.startsWith("missedTasks_")) {
        const day = i.replace("missedTasks_", "");
        const tasks = JSON.parse(localStorage.getItem(i));
        html += `<div><b>${day}</b>: ${tasks.join(", ")} <button onclick="lamBu('${day}')">L√†m b√π</button></div>`;
      }
    }
    container.innerHTML += html;
  }

  function lamBu(day) {
    const key = "missedTasks_" + day;
    const missedTasks = JSON.parse(localStorage.getItem(key));
    if (!missedTasks) return;
    let added = 0;
    missedTasks.forEach((task) => {
      added += task === "on" ? 20 : 5;
      done[day] = done[day] || {};
      done[day][task] = true;
    });
    diem += added;
    localStorage.removeItem(key);
    localStorage.setItem("diem", diem);
    localStorage.setItem("done", JSON.stringify(done));
    alert(`ƒê√£ l√†m b√π ${missedTasks.length} nhi·ªám v·ª• ng√†y ${day} (+${added} ƒëi·ªÉm)`);
    updateProgress();
    renderCalendar();
  }

  function saveNote(day, value) {
    notes[day] = value;
    localStorage.setItem("notes", JSON.stringify(notes));
  }

  function xoaLichHomNay() {
    if (confirm("X√≥a t·∫•t c·∫£ nhi·ªám v·ª• h√¥m nay?")) {
      if (done[today]) {
        let lost = 0;
        Object.keys(done[today]).forEach((task) => {
          lost += task === "on" ? 20 : 5;
        });
        diem = Math.max(0, diem - lost);
        delete done[today];
        localStorage.setItem("diem", diem);
        localStorage.setItem("done", JSON.stringify(done));
        alert("ƒê√£ x√≥a nhi·ªám v·ª• h√¥m nay v√† tr·ª´ ƒëi·ªÉm t∆∞∆°ng ·ª©ng.");
        updateProgress();
        renderCalendar();
      }
    }
  }

  function xoaGhiChuHomNay() {
    if (confirm("X√≥a ghi ch√∫ h√¥m nay?")) {
      if (notes[today]) {
        delete notes[today];
        localStorage.setItem("notes", JSON.stringify(notes));
        alert("ƒê√£ x√≥a ghi ch√∫ h√¥m nay.");
        renderCalendar();
      }
    }
  }

  function setReminder() {
    const time = document.getElementById("reminderTime").value;
    if (!time) return alert("H√£y ch·ªçn gi·ªù!");
    localStorage.setItem("reminderTime", time);
    alert("ƒê√£ l∆∞u gi·ªù nh·∫Øc h·ªçc: " + time);
  }

  function startReminderCheck() {
    if (!("Notification" in window)) return;
    Notification.requestPermission();
    setInterval(() => {
      const t = localStorage.getItem("reminderTime");
      if (!t) return;
      const now = new Date();
      const nowStr =
        now.getHours().toString().padStart(2, "0") +
        ":" +
        now.getMinutes().toString().padStart(2, "0");
      if (nowStr === t) {
        new Notification("‚è∞ ƒê·∫øn gi·ªù h·ªçc r·ªìi! H√£y ho√†n th√†nh m·ª•c ti√™u h√¥m nay nh√©.");
      }
    }, 60000);
  }

  document.addEventListener("DOMContentLoaded", () => {
    updateProgress();
    renderCalendar();
    startReminderCheck();
    document.getElementById("dailyQuote").innerText =
      quotes[new Date().getDate() % quotes.length];
  });
</script>
</body>
</html>



